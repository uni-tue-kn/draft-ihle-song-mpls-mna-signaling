



Network Working Group                                            F. Ihle
Internet-Draft                                   University of Tuebingen
Intended status: Informational                                   X. Song
Expires: 26 May 2025                                     ZTE Corporation
                                                                M. Menth
                                                 University of Tuebingen
                                                        22 November 2024


                  Signaling MNA Capabilities Using IGP
               draft-ihle-song-mpls-mna-signaling-latest

Abstract

   TODO Abstract

About This Document

   This note is to be removed before publishing as an RFC.

   The latest revision of this draft can be found at https://uni-tue-
   kn.github.io/draft-ihle-song-mpls-mna-signaling/draft-ihle-song-mpls-
   mna-signaling.html.  Status information for this document may be
   found at https://datatracker.ietf.org/doc/draft-ihle-song-mpls-mna-
   signaling/.

   Source for this draft and an issue tracker can be found at
   https://github.com/uni-tue-kn/draft-ihle-song-mpls-mna-signaling.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on 26 May 2025.

Copyright Notice

   Copyright (c) 2024 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents (https://trustee.ietf.org/
   license-info) in effect on the date of publication of this document.
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.  Code Components
   extracted from this document must include Revised BSD License text as
   described in Section 4.e of the Trust Legal Provisions and are
   provided without warranty as described in the Revised BSD License.

Table of Contents

   1.  Introduction
     1.1.  Terminology
       1.1.1.  Abbreviations
   2.  Definition of MNA Capabilities
     2.1.  The Readable Label Depth (RLD)
       2.1.1.  Example
     2.2.  NAS Sizes
       2.2.1.  Example
     2.3.  Supported Network Action Opcodes
   3.  Signaling MNA Capabilites
     3.1.  Using IS-IS
     3.2.  Using OSPF
   4.  Security Considerations
   5.  IANA Considerations
   6.  References
     6.1.  Normative References
     6.2.  Informative References
   Acknowledgments
   Authors' Addresses

1.  Introduction

   With the MPLS Network Action (MNA) framework, network actions are
   encoded in the MPLS stack.  [I-D.ietf-mpls-mna-hdr] defines the
   encoding of such network actions and their data in the MPLS stack.
   These network actions are processed by all nodes on a path (hop-by-
   hop), by only selected nodes, or on an ingress-to-egress basis.  LSRs
   have different capabilites that result from the available hardware
   resources.  An ingress LER that pushes network actions to an MPLS
   stack MUST ensure that all nodes on the path can read and support the
   network actions.  For that purpose, the MNA capabilities of an LSR
   need to be signaled to the ingress LER.

   This document defines the required parameters of LSRs regarding their
   MNA capability and proposes a signaling extension using IGP such as
   IS-IS and OSPF.

1.1.  Terminology

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in
   BCP 14 [RFC2119] [RFC8174] when, and only when, they appear in all
   capitals, as shown here.

1.1.1.  Abbreviations

   This document makes use of the terms defined in
   [I-D.ietf-mpls-mna-hdr] and in [I-D.ietf-mpls-mna-fwk].

2.  Definition of MNA Capabilities

   In this section, the parameters an LSR SHOULD signal to the ingress
   LER to indicate its MNA capabilities are defined.

2.1.  The Readable Label Depth (RLD)

   The readable label depth (RLD) is the number of LSEs an LSR can parse
   without performance impact[I-D.ietf-mpls-mna-fwk].  An LSR is
   required to search the MPLS stack for Network-Action Substacks (NAS)
   that have to be processed by this node.  The ingress LER that pushes
   the network actions MUST ensure that a hop-by-hop-scoped network
   action is readable at each LSR on the path, i.e., that it is placed
   within the RLD of each node.  For this purpose, multiple copies of
   the hop-by-hop-scoped NAS may be placed in the stack.

2.1.1.  Example

   An example for the RLD parameter is given in Figure 1.  With an RLD
   of 5, an LSR is capable of reading labels A, B, C, D, and E but not
   D.  An RLD of 8 is required in this example to read the full MPLS
   stack.

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      MPLS-Label = A                   | TC  |0|    TTL        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      MPLS-Label = B                   | TC  |0|    TTL        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      MPLS-Label = C                   | TC  |0|    TTL        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      MPLS-Label = D                   | TC  |0|    TTL        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      MPLS-Label = E                   | TC  |0|    TTL        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      MPLS-Label = F                   | TC  |0|    TTL        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      MPLS-Label = G                   | TC  |0|    TTL        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      MPLS-Label = H                   | TC  |1|    TTL        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

        Figure 1: Example MPLS stack of 8 MPLS LSE illustrating the
                              concept of RLD.

2.2.  NAS Sizes

   A NAS in the MNA header encoding is at least 2 LSEs and at most 17
   LSEs large[I-D.ietf-mpls-mna-hdr].  At an LSR, at least two NAS, a
   select-scoped and a hop-by-hop-scoped NAS, are possible.  With two
   maximum-sized NAS, an LSR is required to reserve 34 LSEs in hardware
   to be able to process network actions.  This consumes hardware
   resources that may be needed to encode other LSEs, e.g., forwarding
   labels for SR-MPLS paths.  Many use cases in the MNA
   framework[I-D.ietf-mpls-mna-use-cases] do not require a maximum-sized
   NAS of 17 LSEs to encode the network action and their ancillary data.
   Therefore, by signaling the maximum-supported NAS size of an MNA
   implementation from an LSR to an ingress LER, the allocated resources
   for NAS can be reduced and more resources are available for other
   purposes.  An LSR SHOULD signal the maximum-supported size of a NAS
   for each scope, i.e., the parameters maxLSEs_NAS^Sel,
   maxLSEs_NAS^HBH, and maxLSEs_NAS^I2E.  Those parameters include the
   Format A, B, C, and D LSEs from [I-D.ietf-mpls-mna-hdr] in a NAS.
   For select-scoped NAS, the ingress LER MUST NOT push NAS to the MPLS
   stack that exceed the MNA capabilities of the node the select-scoped
   NAS is destined for.  For hop-by-hop-scoped NAS, the ingress LER MUST
   NOT push NAS to the MPLS stack that exceed the MNA capabilities of
   any node on the path.  For I2E-scoped NAS, the ingress LER MUST NOT
   push NAS to the MPLS stack that exceed the MNA capabilities of the
   egress node.

2.2.1.  Example

   Figure 1 illustrates the different NAS sizes in an MPLS stack that
   are signaled to the LSR.  In this example, a select-scoped NAS has a
   maximum size of 4 LSEs, a hop-by-hop-scoped NAS of 7 LSEs, and an
   I2E-scoped NAS of 4 LSEs.

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|      MPLS-Label = A                   | TC  |0|    TTL        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+  ──┑
|      MNA-Label=bSPL (TBA)             | TC  |0|    TTL        |    │
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+    │
|   Opcode    |      Data               |R|SEL|0|U| NASL=2|NAL=0|    │
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ maxLSEs
|   Opcode    |      Data                     |0|U|  Data |NAL=1| _NAS^Sel
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+    │
|1|                  Data                     |0|    Data       |    │
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+  ──┚
|      MPLS-Label = B                   | TC  |0|    TTL        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|      MPLS-Label = C                   | TC  |0|    TTL        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+  ──┑
|      MNA-Label=bSPL (TBA)             | TC  |0|    TTL        |    │
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+    │
|   Opcode    |      Data               |R|HBH|0|U| NASL=5|NAL=0|    │
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+    │
|   Opcode    |      Data                     |0|U|  Data |NAL=0|    │
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+    │
|   Opcode    |      Data                     |0|U|  Data |NAL=0| maxLSEs
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ _NAS^HBH
|   Opcode    |      Data                     |0|U|  Data |NAL=0|    │
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+    │
|   Opcode    |      Data                     |0|U|  Data |NAL=1|    │
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+    │
|1|                  Data                     |0|    Data       |    │
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ ───┨
|      MNA-Label=bSPL (TBA)             | TC  |0|    TTL        |    │
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+    │
|   Opcode    |      Data               |R|I2E|0|U| NASL=2|NAL=0|    │
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ maxLSEs
|   Opcode    |      Data                     |0|U|  Data |NAL=1| _NAS^I2E
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+    │
|1|                  Data                     |1|    Data       |    │
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ ───┚

  Figure 2: Example MPLS stack illustrating the different NAS sizes.

2.3.  Supported Network Action Opcodes

3.  Signaling MNA Capabilites

3.1.  Using IS-IS

3.2.  Using OSPF

4.  Security Considerations

   The security issues discussed in [I-D.ietf-mpls-mna-hdr] apply to
   this document.

5.  IANA Considerations

   This document has no IANA actions.

6.  References

6.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/rfc/rfc2119>.

   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,
              May 2017, <https://www.rfc-editor.org/rfc/rfc8174>.

6.2.  Informative References

   [I-D.ietf-mpls-mna-fwk]
              Andersson, L., Bryant, S., Bocci, M., and T. Li, "MPLS
              Network Actions (MNA) Framework", Work in Progress,
              Internet-Draft, draft-ietf-mpls-mna-fwk-13, 18 November
              2024, <https://datatracker.ietf.org/doc/html/draft-ietf-
              mpls-mna-fwk-13>.

   [I-D.ietf-mpls-mna-hdr]
              Rajamanickam, J., Gandhi, R., Zigler, R., Song, H., and K.
              Kompella, "MPLS Network Action (MNA) Sub-Stack Solution",
              Work in Progress, Internet-Draft, draft-ietf-mpls-mna-hdr-
              08, 30 August 2024,
              <https://datatracker.ietf.org/doc/html/draft-ietf-mpls-
              mna-hdr-08>.

   [I-D.ietf-mpls-mna-use-cases]
              "*** BROKEN REFERENCE ***".

Acknowledgments

   TODO acknowledge.

Authors' Addresses

   Fabian Ihle
   University of Tuebingen
   Tuebingen
   Germany
   Email: fabian.ihle@uni-tuebingen.de


   Xueyan Song
   ZTE Corporation
   China
   Email: song.xueyan2@zte.com.cn


   Michael Menth
   University of Tuebingen
   Tuebingen
   Germany
   Email: michael.menth@uni-tuebingen.de
